From 975b142e53608f3b218ee964bd28e1f4dfdde335 Mon Sep 17 00:00:00 2001
From: Link Dupont <link@sub-pop.net>
Date: Fri, 14 May 2021 14:54:44 -0400
Subject: [PATCH] build: Use gzip -c instead of -k

The '-k' option was added in a later version of gzip.

Signed-off-by: Link Dupont <link@sub-pop.net>
---
 Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Makefile b/Makefile
index 2cf6b88..0bc0efc 100644
--- a/Makefile
+++ b/Makefile
@@ -95,7 +95,7 @@ data: $(DATA)
 	go run $(BUILDFLAGS) -ldflags "$(LDFLAGS)" ./cmd/$(patsubst %.1,%,$@) --generate-man-page > $@
 
 %.1.gz: %.1
-	gzip -k $^
+	gzip -c $^ > $@.tmp && mv $@.tmp $@
 
 %-USAGE.md: $(GOSRC)
 	go run $(BUILDFLAGS) -ldflags "$(LDFLAGS)" ./cmd/$(patsubst %-USAGE.md,%,$@) --generate-markdown > $@
